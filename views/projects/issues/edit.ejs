<%- include('../../partials/headers'); -%>



<main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
    <div class="container">
        <div class="container" style="margin-top: 70px ">
            <div class="card bg-light mb-3"
                style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
                <div class="card-header text-white bg-dark mb-3">
                    <h4
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                        Edit Issue
                    </h4>
                </div>
                <div class="card-body">

                    <form action="" method="POST" enctype="multipart/form-data">

                        <input type="hidden" name="olddone" value="100">
                        <input type="hidden" name="oldspent" value="2">

                        <fieldset class="form-group">
                            <div class="row">
                                <legend class="col-form-label col-sm-2 pt-0">Tracker</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="bug" value="Bug"
                                            <%= issue.tracker == 'Bug' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="bug">
                                            Bug
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="feature"
                                            value="Feature" <%= issue.tracker == 'Feature' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="feature">
                                            Feature
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="support"
                                            value="Support" <%= issue.tracker == 'Support' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="support">
                                            Support
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <div class="form-group row">
                            <label for="subject" class="col-sm-2 col-form-label">Subject</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="subject" name="subject"
                                    value=<%= issue.subject%>>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="desc" class="col-sm-2 col-form-label">Description</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" id="desc"
                                    name="description"><%= issue.description%></textarea>
                            </div>
                        </div>

                        <fieldset class="form-group">
                            <div class="row">
                                <legend class="col-form-label col-sm-2 pt-0">Status</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="new" value="new"
                                            <%= issue.status == 'new' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="new">
                                            New
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="inProgress"
                                            value="inProgress" <%= issue.status == 'inProgress' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="inProgress">
                                            In Progress
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="resolved"
                                            value="resolved" <%= issue.status == 'resolved' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="resolved">
                                            Resolved
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="feedback"
                                            value="feedback" <%= issue.status == 'feedback' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="feedback">
                                            Feedback
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="closed"
                                            value="closed" <%= issue.status == 'closed' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="closed">
                                            Closed
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="status" id="rejected"
                                            value="rejected" <%= issue.status == 'rejected' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="rejected">
                                            Rejected
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset class="form-group">
                            <div class="row">
                                <legend class="col-form-label col-sm-2 pt-0">Priority</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priority" id="normal"
                                            value="normal" <%= issue.priority == 'normal' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="normal">
                                            Normal
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priority" id="high"
                                            value="high" <%= issue.priority == 'high' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="high">
                                            High
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priority" id="urgent"
                                            value="urgent" <%= issue.priority == 'urgent' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="urgent">
                                            Urgent
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priority" id="immediate"
                                            value="immediate" <%= issue.priority == 'immediate' ? 'checked' : ''%>>
                                        <label class="form-check-label" for="immediate">
                                            Immediate
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <div class="form-group row">
                            <label for="assignee" class="col-sm-2 col-form-label">
                                Assignee</label>
                            <div class="col-sm-10">
                                <select class="custom-select" name="assignee" required="">
                                    <option disabled>Choose the Assignee ...</option>
                                    <%member.forEach(item =>{%>
                                    <option value="<%= item.userid%>"
                                        <%= item.userid == issue.assignee ? 'selected' : "" %>>
                                        <%= item.fullname%></option>
                                    <%})%>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="startDate" class="col-sm-2 col-form-label">Start Date</label>
                            <div class="col-sm-10">
                                <input type="date" class="form-control" id="startDate" name="startDate"
                                    value="<%= moment(issue.startdate).format('YYYY-MM-DD')%>" disabled>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="dueDate" class="col-sm-2 col-form-label">Due Date</label>
                            <div class="col-sm-10">
                                <input type="date" class="form-control" id="dueDate" name="dueDate"
                                    value="<%= moment(issue.duedate).format('YYYY-MM-DD')%>">
                            </div>
                        </div>

                        <div class="form-group row ">
                            <label for="estimatedTime" class="col-sm-2 col-form-label">Estimated Time
                            </label>
                            <div class="col-sm-4">
                                <input type="number" class="form-control" id="estimatedTime" name="estimatedTime"
                                    value="<%= issue.estimatedtime%>" disabled>
                                <small id="estimatedTime" class="form-text text-muted">
                                    Insert Estimated Time by Hours
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="done" class="col-sm-2 col-form-label">
                                Done</label>
                            <div class="col-sm-10">
                                <select class="custom-select" name="done" required="">
                                    <option>Choose the Percentage ...</option>
                                    <option value="0" <%= issue.done == '0' ? 'selected' : ''%>>0%</option>
                                    <option value="10" <%= issue.done == '10' ? 'selected' : ''%>>10%
                                    </option>
                                    <option value="20" <%= issue.done == '20' ? 'selected' : ''%>>20%
                                    </option>
                                    <option value="30" <%= issue.done == '30' ? 'selected' : ''%>>30%
                                    </option>
                                    <option value="40" <%= issue.done == '40' ? 'selected' : ''%>>40%
                                    </option>
                                    <option value="50" <%= issue.done == '50' ? 'selected' : ''%>>50%
                                    </option>
                                    <option value="60" <%= issue.done == '60' ? 'selected' : ''%>>60%
                                    </option>
                                    <option value="70" <%= issue.done == '70' ? 'selected' : ''%>>70%
                                    </option>
                                    <option value="80" <%= issue.done == '80' ? 'selected' : ''%>>80%
                                    </option>
                                    <option value="90" <%= issue.done == '90' ? 'selected' : ''%>>90%
                                    </option>
                                    <option value="100" <%= issue.done == '100' ? 'selected' : ''%>>100%
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="perenttask" class="col-sm-2 col-form-label">
                                Parent Task</label>
                            <div class="col-sm-10">
                                <select class="custom-select" name="perenttask" required>
                                    <option value="" selected disabled>Choose the ParentTask ...</option>
                                    <%edit.forEach(item=>{%>
                                    <option value="<%=item.issueid%>">
                                        <%= item.subject%>(<%= item.tracker%>)
                                    </option>
                                    <%})%>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row ">
                            <label for="spenttime" class="col-sm-2 col-form-label">Spent Time
                            </label>
                            <div class="col-sm-4">
                                <input type="number" class="form-control" id="spenttime" name="spenttime"
                                    placeholder="Spent Time" value="<%=issue.spenttime%>" required>
                                <small id="spenttime" class="form-text text-muted">
                                    Insert Spent Time by Hours
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="target" class="col-sm-2 col-form-label">Target Version</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="target" name="target"
                                    placeholder="ex: version 1.0" value="<%=issue.targetversion%>" required>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="author" class="col-sm-2 col-form-label">Author</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="author" name="author"
                                    value="<%= issue.authorname%>" disabled>
                            </div>
                        </div>


                        <div class="form-group row">
                            <label for="inputFile" class="col-sm-2 col-form-label">File</label>
                            <div class="col-sm-10">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="inputFile" name="file">
                                    <label class="custom-file-label" for="inputFile">Change file ...</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-sm-10">
                                <button type="submit" class="btn btn-success">Save</button>
                                <a class="btn btn-secondary" href="/projects/issues/<%= projectid%>"
                                    role="button">Back</a>
                            </div>
                        </div>


                    </form>

                </div>
            </div>
        </div>

    </div>
</main>

</div>
</div>

</body>

</html>